<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="custom.css"/>
		<!-- Live2D -->
		<script src="//cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js"></script>
		<script src="//cdn.jsdelivr.net/gh/dylanNew/live2d/webgl/Live2D/lib/live2d.min.js"></script>
		<!-- PixiJS -->
		<script src="//cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js"></script>
		<script src="//cdn.jsdelivr.net/npm/pixi-live2d-display/dist/index.min.js"></script>
		<!-- Mediapipe -->
		<script src="//cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
		<script src="//cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
		<script src="//cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
		<!-- Kalidokit -->
		<script src="//cdn.jsdelivr.net/npm/kalidokit@1.1/dist/kalidokit.umd.js"></script>
	</head>
	<body>
		<h1>テキストを入力</h1>
		<textarea></textarea>
	</body>
	<script>
		const synthes = new SpeechSynthesisUtterance();
		synthes.lang = 'ja-JP';
		synthes.text = 'マイクテストマイクテスト';
		synthes.pitch = 1;
		synthes.rate = 0.8;
		
		if ('speechSynthesis' in window) {
			alert("このブラウザは音声合成に対応しています。🎉")
		} else {
			alert("このブラウザは音声合成に対応していません。😭")
		}
		speechSynthesis.speak(synthes);
		function TTS(){
			if (e.key === 'Enter' && !e.shiftKey) {
			console.log('come here');
			// setSpiner(true) // 👇 Get input value
			// const obj = {speaker: 3, text:text};
			// const method = "POST";
			// const body = JSON.stringify(obj);
			// const headers = {
			// 	'Accept': 'audio/wav',
			// 	'Content-Type': 'application/json'
			// };
			// fetch('/api/',{method,headers,body})
			// .then(res=>res.blob()).then(r=>{
			// 	// const [voice] = useSound(URL.createObjectURL(r));
			// 	// voice();
			// 	setVoice(new Audio(URL.createObjectURL(r)));
			// 	setSpiner(false);
			// 	setText('');
			// 	console.log(r.size);
			// }).catch(err=>setText(err));
		}
	};
	document.querySelector("textarea").addEventListener("keydown", function(event) {
		if (event.keyCode === 13 && !event.shiftKey) {
			// Enter key was pressed without Shift key
			// Your code here
			console.log(event.target);
			synthes.text = event.target.value;
			speechSynthesis.speak(synthes);
			console.log("Enter key was pressed without Shift");
			event.target.value='';
			}
		});
	</script>
</html>